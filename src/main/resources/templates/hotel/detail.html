<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{/layout/header::head('한반도 투어')}"></head> <!-- 이거 알맞게 바꿔주세요-->
<style>
.temp {
  border: 1px black solid; 
  
 }
.right {
  border: 1px lightgray solid;
  margin: 22px 0 20px 0;
 } 
 hr {
   color: gray;
 }
.bigPicture {
  border: 1px gray solid;
  width: 100%;
}
.bigPicture > img{
  width: 100%;
  height: 450px;
  object-fit: cover;
}
.owl_img{
  width: 100%;
  height: 150px;
  object-fit: cover;
}
#imageWrapper {
	height: 180px;
}

.d-block {
  margin: 15px auto 15px auto;
  height: 100px;
}
 
</style>





<body>
	<div th:replace="~{/layout/header::header}"></div>
	
	<div class="main_wrap">
	
	
		 <div class="container text-center">
		  <div class="row">
		    <div class="col-1">	      
		    </div>
		    <div class="col-10" style="border:1px gray dotted; ">
		      	<!--/*여기에 작성/ 다 만들고 style 지워주세요  */-->
    		     
    		    <th:block th:if="${session.user != null}">
             <th:block th:if="${session.user.auth == 0}">
               <button type="button" id="btn_edit">편집</button> 
               <button type="button" id="btn_remove">삭제</button> 
             </th:block>
            </th:block>   
            <div class="row">
              <div class="col-8 temp">
                <div th:text="|조회수 : ${hotel.hit}|"></div>
                <div class="mainPicture" style="border: 1px black solid;">
                  <div class="bigPicture">
										<th:block th:each="hotelImage : ${hotelImage}">
											<img th:if="${hotelImage.thumbnail == 1}" th:src="@{|${hotelImage.imagePath}/${hotelImage.filesystemName}|}">
										</th:block>
									</div>
                  <div class="owl-carousel owl-theme" id="imageWrapper">
                    <th:block th:each="hotelImage : ${hotelImage}">
                      <img class="owl_img" th:src="@{|${hotelImage.imagePath}/${hotelImage.filesystemName}|}">
                    </th:block>
                  </div>
                </div>
								<hr>
                <div>
									<div th:text="${hotel.hotelName}"></div>
									<div th:text="${hotel.hotelAddress}" ></div>
									<div th:text="${hotel.phoneNumber}" ></div>
									<div th:text="${hotel.hEmail}" ></div>
									<div th:text="|최저 ${price[0]}원 부터|"></div>
									<hr>
									<div th:text="${hotel.hotelDetail}"></div>
								</div>
								<hr>
                <div>
									<div>편의 시설</div>
									<i th:if="${fac.pool == 0}" class="fa-solid fa-person-swimming fa-2xl" style="color: #9399a5;"></i>
									<i th:if="${fac.pool == 1}" class="fa-solid fa-person-swimming fa-2xl" style="color: #2f7fa7;"></i>
									<i th:if="${fac.morning == 0}" class="fa-solid fa-utensils fa-2xl" style="color: #9399a5;"></i>
									<i th:if="${fac.morning == 1}" class="fa-solid fa-utensils fa-2xl" style="color: #2f7fa7;"></i>
									<i th:if="${fac.sauna == 0}" class="fa-solid fa-hot-tub-person fa-2xl" style="color: #9399a5;"></i>
									<i th:if="${fac.sauna == 1}" class="fa-solid fa-hot-tub-person fa-2xl" style="color: #2f7fa7;"></i>
									<i th:if="${fac.roomservice == 0}" class="fa-solid fa-bell-concierge fa-2xl" style="color: #9399a5;"></i>
									<i th:if="${fac.roomservice == 1}" class="fa-solid fa-bell-concierge fa-2xl" style="color: #2f7fa7;"></i>
									<i th:if="${fac.lounge == 0}" class="fa-solid fa-couch fa-2xl" style="color: #9399a5;"></i>
									<i th:if="${fac.lounge == 1}" class="fa-solid fa-couch fa-2xl" style="color: #2f7fa7;"></i>
								</div>
							</div>
							<div class="col-4 temp">
              <div class="right">
                <form th:action="@{/reserve/writeHotel.form}" method="get">
                  <div class="title" id="sideTitle" th:text="${hotel.hotelName}"></div>
                  <input type="hidden" name="hotelNo" th:value="${hotel.hotelNo}">
                  <hr>
                  <input type="hidden" id="reserveRoomNo" name="roomNo">
                  <div class="roomType">방타입</div>
                  <div class="price">금액</div>
                  <div class="checkIn">체크인</div>
                  <div class="checkout">체크아웃</div>
                  <button type="button">날짜 선택</button>
                  <hr>
                  <button type="submit">예약하기</button>
                  <button type="button">찜하기</button>
                </form> 
              </div>
              <div id="map" style="width:100%;height:350px;">
                <input type="hidden" id="latitude" th:value="${hotel.latitude}">
                <input type="hidden" id="longitude" th:value="${hotel.longitude}">
              </div>
            </div>
								
								
								
							<th:block th:each="roomType, roomTypeStat : ${roomType}">
              <input type="hidden" th:id="${'roomNo' + roomTypeStat.count}" th:value="${roomType.roomFeatureDto.roomNo}">
              <div>
								<div class="row">
									<div class="col-3 temp">
										<div th:id="${'roomCarousel' + roomTypeStat.count}" class="carousel slide">
										  <div class="carousel-inner">
                        <th:block th:each="roomImage, iterStat : ${hotelImage}">
                            <div th:if="${roomImage.roomNo == roomType.roomFeatureDto.roomNo}" 
                                 th:classappend="${iterStat.index == 0} ? 'carousel-item active' : 'carousel-item'">
                                <img th:src="@{|${roomImage.imagePath}/${roomImage.filesystemName}|}" class="d-block w-100" >
                            </div>
                        </th:block>
										    
										  </div>
										  <button class="carousel-control-prev" type="button" th:data-bs-target="${'#roomCarousel' + roomTypeStat.count}" data-bs-slide="prev">
										    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
										    <span class="visually-hidden">Previous</span>
										  </button>
										  <button class="carousel-control-next" type="button" th:data-bs-target="${'#roomCarousel' + roomTypeStat.count}" data-bs-slide="next">
										    <span class="carousel-control-next-icon" aria-hidden="true"></span>
										    <span class="visually-hidden">Next</span>
										  </button>
										</div>
										<div th:text="|침대 : ${roomType.bed}|"></div>
										<div th:text="|전망 : ${roomType.rView}|"></div>
										<div th:text="|허용인원 : ${roomType.people} 명|"></div>
										<div th:if="${roomType.bleakfast == 0}">조식 : <i class="fa-solid fa-x" style="color: #96b2c5;"></i></div>
										<div th:if="${roomType.bleakfast == 1}">조식 : <i class="fa-sharp fa-solid fa-o" style="color: #96b6c5;"></i></div>
										<div th:if="${roomType.smoke == 0}">흡연 : <i class="fa-solid fa-x" style="color: #96b2c5;"></i></div>
										<div th:if="${roomType.smoke == 1}">흡연 : <i class="fa-sharp fa-solid fa-o" style="color: #96b6c5;"></i></div>
										<div th:text="|${roomType.shower}|"></div>
										<div th:text="|방크기 : ${roomType.rSize}|"></div>
									</div>
									<div class="col-6 temp">
										<div th:text="${roomType.roomName}" th:class="${'roomName'+roomTypeStat.count}"></div>
										<div th:text="${roomType.roomDetail}"></div>
										<div>
											<i th:if="${roomType.roomFeatureDto.water == 0}" class="fa-solid fa-bottle-water fa-2xl" style="color: #9399a5;"></i>
											<i th:if="${roomType.roomFeatureDto.water == 1}" class="fa-solid fa-bottle-water fa-2xl" style="color: #2f7fa7;"></i>
											<i th:if="${roomType.roomFeatureDto.coffee == 0}" class="fa-solid fa-mug-saucer fa-2xl" style="color: #9399a5;"></i>
											<i th:if="${roomType.roomFeatureDto.coffee == 1}" class="fa-solid fa-mug-saucer fa-2xl" style="color: #2f7fa7;"></i>
											<i th:if="${roomType.roomFeatureDto.drier == 0}" class="fa-solid fa-wind fa-2xl" style="color: #9399a5;"></i>
											<i th:if="${roomType.roomFeatureDto.drier == 1}" class="fa-solid fa-wind fa-2xl" style="color: #2f7fa7;"></i>
											<i th:if="${roomType.roomFeatureDto.towel == 0}" class="fa-solid fa-rug fa-2xl" style="color: #9399a5;"></i>
											<i th:if="${roomType.roomFeatureDto.towel == 1}" class="fa-solid fa-rug fa-2xl" style="color: #2f7fa7;"></i>
											<i th:if="${roomType.roomFeatureDto.minibar == 0}" class="fa-solid fa-martini-glass fa-2xl" style="color: #9399a5;"></i>
											<i th:if="${roomType.roomFeatureDto.minibar == 1}" class="fa-solid fa-martini-glass fa-2xl" style="color: #2f7fa7;"></i>
											<i th:if="${roomType.roomFeatureDto.iron == 0}" class="fa-solid fa-shirt fa-2xl" style="color: #9399a5;"></i>
											<i th:if="${roomType.roomFeatureDto.iron == 1}" class="fa-solid fa-shirt fa-2xl" style="color: #2f7fa7;"></i>
										</div>
										  
									</div>
									<div class="col-3 temp">
                    <th:block th:each="price : ${price}">
                      <th:block th:if="${price.roomNo == roomType.roomFeatureDto.roomNo}">
                        <th:block th:if="${price.bsDate <= #calendars.format(#calendars.createNow(), 'yyyy/MM/dd') && price.beDate >= #calendars.format(#calendars.createNow(), 'yyyy/MM/dd')}">
                          <div th:text="|비수기 : ${price.bsDate} ~ ${price.beDate}|"></div>
                          <div th:text="|${price.biPrice}원|"> </div>
                        </th:block>
                        <th:block th:if="${price.jsDate <= #calendars.format(#calendars.createNow(), 'yyyy/MM/dd') && price.jeDate >= #calendars.format(#calendars.createNow(), 'yyyy/MM/dd')}">
                          <div th:text="|준성수기 : ${price.jsDate} ~ ${price.jeDate}|"></div>
                          <div th:text="|${price.junPrice}원|"> </div>
                        </th:block>
                        <th:block th:if="${price.ssDate <= #calendars.format(#calendars.createNow(), 'yyyy/MM/dd') && price.seDate >= #calendars.format(#calendars.createNow(), 'yyyy/MM/dd')}">
                          <div th:text="|성수기 : ${price.ssDate} ~ ${price.seDate}|"></div>
                          <div th:text="|${price.sungPrice}원|"> </div>
                        </th:block>
                      </th:block>
										</th:block>
										<div><button type="button" class="btn-choice" th:attr="data-roomno=${'roomNo' + roomTypeStat.count}" onclick="selectRoom(this.getAttribute('data-roomno'))">선택</button></div>
										<div th:text="|남은방 : ${roomType.roomMany}개| "></div>
									</div>
								</div>
							</div>
              </th:block>  
            </div>
		    </div>
		    <div class="col-1">	      
		    </div>
		  </div>
	  </div>
	
	</div>
<script th:inline="javascript">
  
  function kakaoMap(){
    var latitude = $('#latitude').val();
    var longitude = $('#longitude').val(); 
    var title = $('#sideTitle').text()
    
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
      mapOption = { 
          center: new kakao.maps.LatLng(latitude, longitude), // 지도의 중심좌표
          level: 3 // 지도의 확대 레벨
      };
    
    var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
    
    // 마커가 표시될 위치입니다 
    var markerPosition  = new kakao.maps.LatLng(latitude, longitude); 
    
    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        position: markerPosition
    });
    
    // 마커가 지도 위에 표시되도록 설정합니다
    marker.setMap(map);
    
    var iwContent = '<div style="padding:5px;">'+title+'<br><a href="https://map.kakao.com/link/map/Hello World!,'+latitude+','+longitude+'" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/Hello World!,'+latitude+','+longitude+'" style="color:blue" target="_blank">길찾기</a></div>', // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
      iwPosition = new kakao.maps.LatLng(33.450701, 126.570667); //인포윈도우 표시 위치입니다
  
    // 인포윈도우를 생성합니다
    var infowindow = new kakao.maps.InfoWindow({
        position : iwPosition, 
        content : iwContent 
    });
      
    // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
    infowindow.open(map, marker); 
  }
  
  $(document).ready(function (e){
    
    $(document).on("click","img",function(){
      var path = $(this).attr('src')
      showImage(path);
    });//end click event
    
    function showImage(fileCallPath){
        $(".bigPicture").empty();
        $(".bigPicture")
        .html("<img src='"+fileCallPath+"' >")
        .animate({width:'100%', height: '100%'}, 1000);
        
      }//end fileCallPath
  });

  $(document).ready(function() {
           var owl = $('.owl-carousel');
            owl.owlCarousel({
              items: 4, // 한번에 보여지는 이미지 수
              loop: true, // 항목들을 무한으로 반복하여 보여줄지 여부
              autoplay: false, // 자동으로 슬라이드 쇼를 시작할지 여부
              autoplayTimeout: 4000, // 다음 이미지로 넘어가는 시간 (단위 : 밀리초)
              autoplayHoverPause: true, // 마우스가 이미지에 위에 있을 때 자동 슬라이드를 일시중지 할지 여부
              dots: false,
              nav: true,
              margin: 10,
            });           
          });
  
  function selectRoom(roomNo){
   console.log(roomNo);
  roomNumber = document.getElementById(roomNo).value;
  document.getElementById('reserveRoomNo').value = roomNumber;
  console.log(document.getElementById('reserveRoomNo').value);
 }
  
  
  
  
  
  
  kakaoMap();
  
</script>
	
	
	
	<div th:replace="~{/layout/footer::footer}"></div>
</body>
</html>

