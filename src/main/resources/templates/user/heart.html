<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{/layout/header::head('ì°œ')}"></head>


<body>
  
  <div th:replace="~{/layout/header::header}"></div>
  
  <div class="container text-center">  <!-- ê·¸ë¦¬ë“œ ì‹œì‘ -->  
    <div class="row">
      <div class="col-1">
    <div class="w3-sidebar w3-bar-block" style="width:8%; height:200px;"> <!-- ì‚¬ì´ë“œë°” -->
      <a href='' class="w3-bar-item w3-button">ë‚´ ì •ë³´</a>
      <a href='' class="w3-bar-item w3-button">ë‚´ ì˜ˆì•½</a>
    </div>    
      </div>
      <div class="col-10" >
		<table class="table w-75 p-3 text-center">
          <thead>
            <tr>
              <th scope="col">â¤ï¸
                <input type="checkbox" value="" >
                  <label for="flexCheckDefault">
                </label>
              </th>
              <th scope="col">ì œëª©</th>
              <th scope="col">ê°€ê²©</th>
            </tr>
          </thead>
          <input type="hidden" id="userNo" th:value="${session.user.userNo}"> 
          <tbody id="heart_list"></tbody>
          <tfoot>
           <tr>
            <td colspan="5" id="paging"></td>
           </tr>
          </tfoot>
          </table>     	
		</div>         
      </div>
    <div class="col-1">      
    </div>
  </div>
  </div>
            
     
  <script th:inline="javascript">
	  
	const fnAjaxPaging = (clickedPage) => {
        // í˜ì´ì§€ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œì˜ ë™ì‘ ì •ì˜
        page = clickedPage;
        fnGetHeartList();  // í˜ì´ì§€ ë³€ê²½ í›„ ëª©ë¡ì„ ë‹¤ì‹œ ê°€ì ¸ì˜´
    };  
	  
    var page = 1;
	var userNo = $('#userNo').val();
	 const fnGetHeartList = () => {		   
        $.ajax({
            type: 'get',
            url: '/user/heartList.do?page='+ page,   
            data: {userNo : userNo},	
            dataType: 'json',
            success: (resData) => {     
				$('#heart_list').empty();              
                    $.each(resData.heartList, (i, heart) => {
                        let str = '<tr>';
                        str += '<td scope="row">ğŸ’™';
                        str += '<input type="checkbox" value="" >';
                        str += '<label for="flexCheckDefault">';
                        str += '</label>';
                        str += '</td>';
                        str += '<td>';
                        str += '<a href="/package/detail.do?packageNo=' + heart.packageDto.packageNo + '">' + heart.packageDto.packageTitle;
                        str += '</a>';
                        str += '</td>';
                        str += '<td>' + heart.packageDto.price + 'ì›';
                        str += '</td>';
                        str += '</tr>';
                        $('#heart_list').append(str);
                    });
                     $('#paging').html(resData.paging);
            },
            error: (error) => {
                console.error('Ajax ìš”ì²­ ì—ëŸ¬:', error);
            }
        });
    }


    fnGetHeartList();
  </script>
    
  <div th:replace="~{/layout/footer::footer}"></div>
  
</body>
</html>